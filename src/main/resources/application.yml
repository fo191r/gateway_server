spring:
  # Se añaden las configuraciones de kubernetes
  cloud:
    kubernetes:
      discovery:
        enabled: true
        all-namespaces: true
      loadbalancer:
        mode: service
      config:
        enabled: true
      reload:
        enabled: true
        monitoring-config-maps: true
        strategy: refresh
        mode: event

    #Se añade la resolucion de paths basados en nombres de servicios registrados en kubernetes
    gateway:
      routes:
        - id: product-service
          uri: lb://product-service-s
          predicates:
            - Path=/store/**
        - id: item-service
          uri: lb://item-service-s
          predicates:
            - Path=/goods/**

  # Se añade la configuracion de conexion hacia el servicio de autorizacion - keycloak
  security:
    oauth2:
      resourceserver:
        jwt:
          issuer-uri: http://keycloak/realms/udemy-realm-cloud
          jwk-set-uri: http://keycloak/realms/udemy-realm-cloud/protocol/openid-connect/certs


logging:
  level:
    org.keycloak: DEBUG # Logs relacionados a keycloak

server:
  port: 8090